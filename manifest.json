{
  "manifest_version": 3,
  "name": "PerspectiveLens",
  "version": "0.1",
  "description": "Reveals how the same news is reported globally, using AI for translation, summarization, and comparative analysis.",
  "permissions": [
    "storage",
    "offscreen",
    "tabs",
    "scripting"
  ],
  "host_permissions": [
    "https://news.google.com/*",
    "http://*/*",
    "https://*/*"
  ],
  "action": {
    "default_popup": "popup.html"
  },
  "options_page": "ui/pages/options/options.html",
  "background": {
    "service_worker": "scripts/background.js",
    "type": "module"
  },
  "web_accessible_resources": [
    {
      "resources": [
        "prompts/*.txt",
        "prompts/*.json",
        "prompts/nano/*.txt",
        "prompts/pro/*.txt",
        "prompts/schemas/*.json",
        "offscreen/offscreen.html",
        "ui/isolation.css",
        "ui/shadow-root.css",
        "ui/design-system.css",
        "ui/theme-manager.js",
        "ui/icons.js",
        "ui/components/toast/single-toast.css",
        "ui/components/toast/single-toast.js",
        "ui/components/panel/panel-loader.js",
        "ui/components/panel/panel-styles.css",
        "ui/components/panel/panel-renderer.js",
        "ui/components/panel/stages/*.js",
        "ui/components/panel/modal/*.js",
        "ui/components/panel/modal/*.css",
        "ui/pages/options/settings-modal.html",
        "ui/pages/options/settings-modal.css",
        "ui/pages/options/settings-modal.js",
        "config/configManager.js",
        "config/pipeline.js",
        "config/apiKeyManager.js",
        "api/gemini-2-5-pro.js",
        "images/*.png",
        "icons/flags/*.svg",
        "fonts/*.ttf"
      ],
      "matches": [
        "<all_urls>"
      ]
    }
  ],
  "icons": {
    "16": "images/icon-16.png",
    "32": "images/icon-32.png",
    "48": "images/icon-48.png",
    "128": "images/icon-128.png"
  },
  "content_scripts": [
    {
      "js": [
        "ui/theme-manager.js",
        "ui/components/toast/single-toast.js",
        "ui/components/panel/panel-loader.js",
        "scripts/content.js"
      ],
      "css": [
        "ui/isolation.css"
      ],
      "matches": [
        "https://*.g1.globo.com/*",
        "https://*.folha.uol.com.br/*",
        "https://*.estadao.com.br/*",
        "https://*.uol.com.br/*",
        "https://*.nytimes.com/*",
        "https://*.cnn.com/*",
        "https://*.washingtonpost.com/*",
        "https://*.reuters.com/*",
        "https://*.bbc.com/*",
        "https://*.theguardian.com/*",
        "https://*.aljazeera.com/*",
        "https://*.apnews.com/*",
        "https://*.lemonde.fr/*",
        "https://*.elpais.com/*",
        "https://*.spiegel.de/*",
        "https://*.xinhuanet.com/*",
        "https://*.chinadaily.com.cn/*",
        "https://*.globaltimes.cn/*",
        "https://*.peopledaily.com.cn/*",
        "https://*.scmp.com/*",
        "https://*.straitstimes.com/*",
        "https://*.japantimes.co.jp/*",
        "https://*.clarin.com/*",
        "https://*.lanacion.com.ar/*"
      ],
      "run_at": "document_idle",
      "all_frames": false
    }
  ]
}