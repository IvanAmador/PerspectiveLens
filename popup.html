<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PerspectiveLens</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="ui/settings-modal.css">
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <h1 class="title">PerspectiveLens</h1>
      <button id="settings-btn" class="icon-btn" title="Settings" aria-label="Settings">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
          <path d="M12 2C12 2 10.5 2 10.5 4C10.5 6 9 6 9 6H7C7 6 5 6 5 8V10C5 10 5 11.5 3 11.5C1 11.5 1 13.5 3 13.5C5 13.5 5 15 5 15V17C5 19 7 19 7 19H9C9 19 10.5 19 10.5 21C10.5 23 12 23 12 23C12 23 13.5 23 13.5 21C13.5 19 15 19 15 19H17C19 19 19 17 19 17V15C19 15 19 13.5 21 13.5C23 13.5 23 11.5 21 11.5C19 11.5 19 10 19 10V8C19 6 17 6 17 6H15C15 6 13.5 6 13.5 4C13.5 2 12 2 12 2Z" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </header>

    <!-- Main Content -->
    <main class="content">
      <!-- AI Models Section -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">AI Model Status</h2>
          <button id="refresh-status" class="icon-btn-small" title="Refresh status" aria-label="Refresh status">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21 2V8M21 8H15M21 8L18 5.5C16.5 4 14.5 3 12 3C7 3 3 7 3 12C3 17 7 21 12 21C15.5 21 18.5 19 20 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>

        <div class="status-card" id="ai-status-card">
          <div class="status-row">
            <span class="status-label">Gemini Nano</span>
            <div class="status-value" id="models-status">
              <span class="spinner"></span>
              <span>Checking...</span>
            </div>
          </div>

          <!-- Progress Bar (hidden by default) -->
          <div class="progress-container" id="download-progress" style="display: none;">
            <div class="progress-bar">
              <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <div class="progress-info">
              <span id="progress-percent">0%</span>
              <span id="progress-size">0 MB / 22 GB</span>
            </div>
          </div>

          <!-- Download Button (hidden by default) -->
          <button id="download-model" class="btn-primary" style="display: none;">
            Download AI Model
          </button>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <a href="https://github.com/yourusername/PerspectiveLens" target="_blank" class="footer-link" rel="noopener noreferrer">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9 19C4 20.5 4 16.5 2 16M16 22V18.13C16.0375 17.6532 15.9731 17.1738 15.811 16.7238C15.6489 16.2738 15.3929 15.8634 15.06 15.52C18.2 15.17 21.5 13.98 21.5 8.52C21.4997 7.12383 20.9627 5.7812 20 4.77C20.4559 3.54851 20.4236 2.19835 19.91 1C19.91 1 18.73 0.65 16 2.48C13.708 1.85882 11.292 1.85882 9 2.48C6.27 0.65 5.09 1 5.09 1C4.57638 2.19835 4.54414 3.54851 5 4.77C4.03013 5.7887 3.49252 7.14346 3.5 8.55C3.5 13.97 6.8 15.16 9.94 15.55C9.611 15.89 9.35726 16.2954 9.19531 16.7399C9.03335 17.1844 8.96681 17.6581 9 18.13V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>View on GitHub</span>
      </a>
    </footer>

    <script src="popup.js" type="module"></script>
  </body>
</html>
