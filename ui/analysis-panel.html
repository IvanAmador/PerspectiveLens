<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PerspectiveLens Analysis</title>
  <link rel="stylesheet" href="analysis-panel.css">
</head>
<body>
  <!-- Main container injected into page -->
  <div id="perspectivelens-panel" class="pl-panel pl-panel-collapsed">
    <!-- Header -->
    <div class="pl-panel-header">
      <div class="pl-panel-title">
        <img src="../images/icon-32.png" alt="PerspectiveLens" class="pl-icon">
        <h2>PerspectiveLens</h2>
      </div>
      <button class="pl-toggle-btn" id="pl-toggle-btn" aria-label="Toggle panel">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
    </div>

    <!-- Content area (hidden when collapsed) -->
    <div class="pl-panel-content" id="pl-panel-content">
      <!-- Loading state -->
      <div class="pl-loading" id="pl-loading">
        <div class="pl-spinner"></div>
        <p>Analyzing perspectives...</p>
      </div>

      <!-- Error state -->
      <div class="pl-error" id="pl-error" style="display: none;">
        <div class="pl-error-icon">‚ö†Ô∏è</div>
        <h3>Analysis Failed</h3>
        <p id="pl-error-message"></p>
        <button class="pl-btn-retry" id="pl-retry-btn">Retry Analysis</button>
      </div>

      <!-- Main analysis content -->
      <div class="pl-analysis" id="pl-analysis" style="display: none;">
        <!-- Summary card -->
        <div class="pl-card pl-card-summary">
          <h3 class="pl-card-title">
            <span class="pl-icon-emoji">üìä</span>
            Story Summary
          </h3>
          <p class="pl-main-story" id="pl-main-story"></p>
          <p class="pl-key-differences" id="pl-key-differences"></p>
        </div>

        <!-- Stats bar -->
        <div class="pl-stats-bar">
          <div class="pl-stat">
            <span class="pl-stat-value" id="pl-consensus-count">0</span>
            <span class="pl-stat-label">Consensus</span>
          </div>
          <div class="pl-stat">
            <span class="pl-stat-value" id="pl-disputes-count">0</span>
            <span class="pl-stat-label">Disputes</span>
          </div>
          <div class="pl-stat">
            <span class="pl-stat-value" id="pl-omissions-count">0</span>
            <span class="pl-stat-label">Omissions</span>
          </div>
          <div class="pl-stat">
            <span class="pl-stat-value" id="pl-bias-count">0</span>
            <span class="pl-stat-label">Bias Signs</span>
          </div>
        </div>

        <!-- Consensus section -->
        <div class="pl-section" id="pl-consensus-section">
          <h3 class="pl-section-title">
            <span class="pl-icon-emoji">‚úÖ</span>
            Consensus
            <span class="pl-badge pl-badge-green" id="pl-consensus-badge">0</span>
          </h3>
          <div class="pl-section-desc">Facts that all or most sources agree on</div>
          <div id="pl-consensus-list" class="pl-list"></div>
        </div>

        <!-- Disputes section -->
        <div class="pl-section" id="pl-disputes-section">
          <h3 class="pl-section-title">
            <span class="pl-icon-emoji">‚ö†Ô∏è</span>
            Disputes
            <span class="pl-badge pl-badge-yellow" id="pl-disputes-badge">0</span>
          </h3>
          <div class="pl-section-desc">Topics where sources disagree</div>
          <div id="pl-disputes-list" class="pl-list"></div>
        </div>

        <!-- Omissions section -->
        <div class="pl-section" id="pl-omissions-section">
          <h3 class="pl-section-title">
            <span class="pl-icon-emoji">üîç</span>
            Omissions
            <span class="pl-badge pl-badge-orange" id="pl-omissions-badge">0</span>
          </h3>
          <div class="pl-section-desc">Information missing from some sources</div>
          <div id="pl-omissions-list" class="pl-list"></div>
        </div>

        <!-- Bias indicators section -->
        <div class="pl-section" id="pl-bias-section">
          <h3 class="pl-section-title">
            <span class="pl-icon-emoji">üéØ</span>
            Bias Indicators
            <span class="pl-badge pl-badge-red" id="pl-bias-badge">0</span>
          </h3>
          <div class="pl-section-desc">Potential signs of media bias</div>
          <div id="pl-bias-list" class="pl-list"></div>
        </div>

        <!-- Sources analyzed -->
        <div class="pl-footer">
          <div class="pl-sources-analyzed">
            <strong>Sources analyzed:</strong>
            <span id="pl-sources-list"></span>
          </div>
          <div class="pl-timestamp">
            <span id="pl-analysis-time"></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="analysis-panel.js" type="module"></script>
</body>
</html>
